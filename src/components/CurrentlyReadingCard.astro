---
import { og } from '@/utils/og'

type Props = {
	url: string
}

const { url } = Astro.props

const ogData = await og(url)
---

<section
	class='card-shadow group relative w-full rounded-md border border-border bg-card-background p-4 md:max-w-[60ch]'
>
	<div class='flex flex-col gap-2'>
		<div class='flex'>
			<img
				class='w-20'
				src=`${ogData?.imageUrl}`
				alt=`Book cover of ${ogData?.title}`
			/>
			<div class='flex flex-col p-2'>
				<p class='max-w-[60ch] text-lg font-bold leading-6'>
					{ogData?.title}
				</p>
				<a
					class='mt-auto text-sm text-link hover:text-link-hover'
					href={ogData?.canonical}
					target='_blank'
					rel='noopener noreferrer'
				>
					Learn more <span
						><img
							class='inline w-4'
							src='/open-in-new-window.svg'
							alt='Open in new window'
						/></span
					>
				</a>
			</div>
		</div>
	</div>
</section>
